{"ast":null,"code":"import React,{useState,useRef,useEffect}from\"react\";import{Image as LucideImage}from\"lucide-react\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){const[input,setInput]=useState(\"\");const[chatLog,setChatLog]=useState([]);const fileInputRef=useRef(null);const chatEndRef=useRef(null);const sendMessage=async()=>{if(!input.trim())return;// 사용자 메시지 추가\nsetChatLog(prev=>[...prev,{sender:\"user\",text:input}]);try{const response=await fetch(\"/api/chat\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({message:input})});const data=await response.json();// 챗봇 응답 추가\nsetChatLog(prev=>[...prev,{sender:\"bot\",text:data.reply}]);}catch(error){setChatLog(prev=>[...prev,{sender:\"bot\",text:\"서버와 통신 중 오류가 발생했습니다.\"}]);}setInput(\"\");};const handleKeyPress=e=>{if(e.key===\"Enter\")sendMessage();};const handleImageClick=()=>{var _fileInputRef$current;(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();};useEffect(()=>{if(chatEndRef.current){chatEndRef.current.scrollIntoView({behavior:\"smooth\"});}},[chatLog]);return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"app-header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"app-logo\",children:\"DIMP\"})}),/*#__PURE__*/_jsxs(\"main\",{className:\"app-main\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"app-title\",children:\"\\uD53C\\uBD80\\uC9C8\\uD658\\uC744 \\uCF00\\uC5B4\\uD574\\uB4DC\\uB824\\uC694\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-log\",children:[chatLog.map((msg,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"chat-message \".concat(msg.sender===\"user\"?\"user-message\":\"bot-message\"),children:/*#__PURE__*/_jsx(\"span\",{className:\"message-text\",children:msg.text})},i)),/*#__PURE__*/_jsx(\"div\",{ref:chatEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-area\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uBB34\\uC5C7\\uC774\\uB4E0 \\uBB3C\\uC5B4\\uBCF4\\uC138\\uC694\",value:input,onChange:e=>setInput(e.target.value),onKeyPress:handleKeyPress,className:\"chat-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleImageClick,className:\"image-upload-btn\",\"aria-label\":\"\\uC774\\uBBF8\\uC9C0 \\uCCA8\\uBD80\",children:/*#__PURE__*/_jsx(LucideImage,{size:24})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",ref:fileInputRef,className:\"hidden-file-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,className:\"send-btn\",\"aria-label\":\"\\uC804\\uC1A1\",children:\"\\u25B6\"})]})]})]});}","map":{"version":3,"names":["React","useState","useRef","useEffect","Image","LucideImage","jsx","_jsx","jsxs","_jsxs","App","input","setInput","chatLog","setChatLog","fileInputRef","chatEndRef","sendMessage","trim","prev","sender","text","response","fetch","method","headers","body","JSON","stringify","message","data","json","reply","error","handleKeyPress","e","key","handleImageClick","_fileInputRef$current","current","click","scrollIntoView","behavior","className","children","map","msg","i","concat","ref","type","placeholder","value","onChange","target","onKeyPress","onClick","size","accept"],"sources":["E:/chatPrac/FE/src/App.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport { Image as LucideImage } from \"lucide-react\";\r\nimport \"./App.css\";\r\n\r\nexport default function App() {\r\n  const [input, setInput] = useState(\"\");\r\n  const [chatLog, setChatLog] = useState([]);\r\n  const fileInputRef = useRef(null);\r\n  const chatEndRef = useRef(null);\r\n\r\n  const sendMessage = async () => {\r\n    if (!input.trim()) return;\r\n\r\n    // 사용자 메시지 추가\r\n    setChatLog((prev) => [...prev, { sender: \"user\", text: input }]);\r\n\r\n    try {\r\n      const response = await fetch(\"/api/chat\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ message: input }),\r\n      });\r\n      const data = await response.json();\r\n      // 챗봇 응답 추가\r\n      setChatLog((prev) => [...prev, { sender: \"bot\", text: data.reply }]);\r\n    } catch (error) {\r\n      setChatLog((prev) => [\r\n        ...prev,\r\n        { sender: \"bot\", text: \"서버와 통신 중 오류가 발생했습니다.\" },\r\n      ]);\r\n    }\r\n\r\n    setInput(\"\");\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === \"Enter\") sendMessage();\r\n  };\r\n\r\n  const handleImageClick = () => {\r\n    fileInputRef.current?.click();\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (chatEndRef.current) {\r\n      chatEndRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n    }\r\n  }, [chatLog]);\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      {/* 헤더 */}\r\n      <header className=\"app-header\">\r\n        <div className=\"app-logo\">DIMP</div>\r\n      </header>\r\n\r\n      {/* 메인 콘텐츠 */}\r\n      <main className=\"app-main\">\r\n        <h1 className=\"app-title\">피부질환을 케어해드려요</h1>\r\n\r\n        {/* 채팅 로그 영역 */}\r\n        <div className=\"chat-log\">\r\n          {chatLog.map((msg, i) => (\r\n            <div\r\n              key={i}\r\n              className={`chat-message ${\r\n                msg.sender === \"user\" ? \"user-message\" : \"bot-message\"\r\n              }`}\r\n            >\r\n              <span className=\"message-text\">{msg.text}</span>\r\n            </div>\r\n          ))}\r\n          <div ref={chatEndRef} />\r\n        </div>\r\n\r\n        {/* 입력 영역 */}\r\n        <div className=\"input-area\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"무엇이든 물어보세요\"\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            onKeyPress={handleKeyPress}\r\n            className=\"chat-input\"\r\n          />\r\n\r\n          {/* 이미지 업로드 버튼 */}\r\n          <button\r\n            onClick={handleImageClick}\r\n            className=\"image-upload-btn\"\r\n            aria-label=\"이미지 첨부\"\r\n          >\r\n            <LucideImage size={24} />\r\n          </button>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            ref={fileInputRef}\r\n            className=\"hidden-file-input\"\r\n          />\r\n\r\n          {/* 전송 버튼 */}\r\n          <button onClick={sendMessage} className=\"send-btn\" aria-label=\"전송\">\r\n            ▶\r\n          </button>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}